FROM python:3.11-slim

# Install mcp-server-qdrant and dependencies
RUN pip install --no-cache-dir mcp-server-qdrant

# Pre-warm the embedding model to avoid download delay on startup
RUN python3 -c "from fastembed import TextEmbedding; print('Pre-warming embedding model...'); model = TextEmbedding(model_name='BAAI/bge-small-en-v1.5'); list(model.embed(['test'])); print('Model ready!')"

# Set default command
CMD ["mcp-server-qdrant"]
